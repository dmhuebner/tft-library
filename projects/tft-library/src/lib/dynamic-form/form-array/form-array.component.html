<tft-field-container
  [config]="config"
  [formGroup]="group">
  <div [formArrayName]="config.controlName">

    <!-- <mat-form-field
      *ngFor="let control of getFormArray().controls as controls; let i = index;">
      <input
        type="text"
        matInput
        [placeholder]="config.placeholder"
        [formGroupName]="i">
    </mat-form-field> -->
    <ng-container *ngIf="config.itemConfig.controlType === controlType.GROUP else control">
      <ng-container
        *ngFor="let control of getFormArray(config.controlName).controls as controls; let i = index;"
        tftDynamicField
        [config]="config.itemConfig"
        [group]="controls"
        [formGroupName]="i">
      </ng-container>

    </ng-container>

    <ng-template #control>
      <ng-container
        *ngFor="let control of getFormArray(config.controlName).controls as controls; let i = index;"
        tftDynamicField
        [config]="config.itemConfig"
        [group]="controls"
        [formControlName]="i">
      </ng-container>
    </ng-template>

  </div>


  <button
    type="button"
    mat-raised-button
    (click)="addControl()">
    {{addItemLabel}}
  </button>

</tft-field-container>
